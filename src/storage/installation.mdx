---
name: Installation
menu: Storage
route: /storage/installation
---

# Installation

Before proceding make sure you have succesfully installed Kerberos Enterprise inside your Kubernetes cluster. The installation guide of Kerberos Storage, expects to have several components already installed: MongoDB, Traefik, Helm, etc.

Once this is done startt by cloning the configrations from our Github repo.

    git clone https://github.com/kerberos-io/storage
    cd storage

## Storage

The last step is to install the storage service. Kerberos Storage is managed through a simple web interface. It allows you to add your storage providers, add queues for messaging, accounts for security and much more.

Before installing Kerberos Storage, open the `yaml/kubernetes.yaml` configuration file. At the bottom file you will find two endpoints, similar to the traefik config file. Update the domain names to your own domain, and add these to your DNS server (pointing to the same IP as the traefik EXTERNAL-IP).

        spec:
          rules:
    -->   - host: storage.domain.com
            http:
              paths:
              - path: /
                backend:
                  serviceName: kerberos-storage
                  servicePort: 80
    -->   - host: api.storage.domain.com
            http:
              paths:
              - path: /
                backend:
                  serviceName: kerberos-storage
                  servicePort: 8081

Modify the MongoDB credentials, and make sure they match the credentials of your MongoDB instance.

        - name: MONGODB_USERNAME
          value: "root"
        - name: MONGODB_PASSWORD
    -->   value: "xxxxxxxxxx"

Once you have corrected the DNS names and MongoDB credentials, install Kerberos Storage inside your cluster.

    kubectl apply -f ./yaml/kubernetes.yaml

## Test out configuration

If everything worked out as expected, you should now have following services in your cluster:

  - MongoDB
  - Traefik
  - Storage

It should look like this.

    $ kubectl get pods
    NAME                              READY   STATUS    RESTARTS   AGE
    kerberos-storage-6f5c877d7c-hf77p 1/1     Running   0          2d11h
    mongodb-55566dc65c-xgmns          2/2     Running   0          4d13h
    traefik-7d566ccc47-mwslb          1/1     Running   0          4d12h

## Access the system

Once everything is configured correctly your cluster and DNS, you should be able to access the Storage application. By navigating to the Storage domain `storage.domain.com` in your browser you will see the Storage login page showing up.

![Factory](../../public/images/factory/kerberos-factory-loginpage.png)

## Storage Cleanup

Next to storing your recordings, cleaning them up is also important. Therefore we have build a cleanup service called Kerberos Storage Cleanup, which you can use to remove recordings based on different rules.

Modify the MongoDB credentials, as you did for the Kerberos Storage yaml file.

        - name: MONGODB_USERNAME
          value: "root"
        - name: MONGODB_PASSWORD
    -->   value: "xxxxxxxxxx"

Execute following script to deploy the cleanup job.

    kubectl apply -f ./yaml/kubernetes-cleanup.yaml
