(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{rnCR:function(a,e,s){"use strict";s.r(e),s.d(e,"_frontmatter",(function(){return m})),s.d(e,"default",(function(){return N}));s("5hJT"),s("W1QL"),s("K/PF"),s("t91x"),s("75LO"),s("PJhk"),s("mXGw");var t=s("/FXl"),n=s("TjRS");s("sW4K"),s("aD51");function p(){return(p=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(a[t]=s[t])}return a}).apply(this,arguments)}var m={};void 0!==m&&m&&m===Object(m)&&Object.isExtensible(m)&&!m.hasOwnProperty("__filemeta")&&Object.defineProperty(m,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"src/open-source/installation-advanced.mdx"}});var c={_frontmatter:m},b=n.a;function N(a){var e=a.components,s=function(a,e){if(null==a)return{};var s,t,n={},p=Object.keys(a);for(t=0;t<p.length;t++)s=p[t],e.indexOf(s)>=0||(n[s]=a[s]);return n}(a,["components"]);return Object(t.b)(b,p({},c,s,{components:e,mdxType:"MDXLayout"}),Object(t.b)("h1",{id:"installation"},"Installation"),Object(t.b)("p",null,"Kerberos Open Source comes with different installation flavours. So you might think, why?  The reason is simple, depending on the use case one option is better than another. A short list of recommendations:"),Object(t.b)("h3",{id:"plug-and-play"},"Plug and play"),Object(t.b)("ol",null,Object(t.b)("li",{parentName:"ol"},Object(t.b)("a",p({parentName:"li"},{href:"/opensource/installation#kios"}),"KiOS"),": You have a Raspberry Pi, and you only want to run a Kerberos agent on it."),Object(t.b)("li",{parentName:"ol"},Object(t.b)("a",p({parentName:"li"},{href:"/opensource/installation#docker"}),"Docker"),": You have a lot of IP cameras, and/or don't want to mess with dependencies."),Object(t.b)("li",{parentName:"ol"},Object(t.b)("a",p({parentName:"li"},{href:"/opensource/installation#balena"}),"Balena"),": Runnning the Kerberos Docker container on top of Balena.")),Object(t.b)("h3",{id:"advanced"},"Advanced"),Object(t.b)("ol",{start:4},Object(t.b)("li",{parentName:"ol"},Object(t.b)("a",p({parentName:"li"},{href:"/opensource/installation-advanced#raspbian"}),"Raspbian"),": You have a Raspberry Pi, but you want other services running next to the Kerberos agent."),Object(t.b)("li",{parentName:"ol"},Object(t.b)("a",p({parentName:"li"},{href:"/opensource/installation-advanced#generic"}),"Generic"),": You want to develop/extend Kerberos with your own features, or you want to run a Kerberos agent on a not supported OS/architecure.")),Object(t.b)("hr",null),Object(t.b)("h1",{id:"advanced-1"},"Advanced"),Object(t.b)("p",null,"Following installation methods are only for advanced users, who need to have more control over the Kerberos Open Source environment."),Object(t.b)("h2",{id:"raspbian"},"Raspbian"),Object(t.b)("p",null,"If you have already an OS (e.g. Raspbian Buster) flashed to your Raspberry Pi, then it makes sense to install the Kerberos agent on top of your existing OS. There are two ways to achieve this:"),Object(t.b)("ol",null,Object(t.b)("li",{parentName:"ol"},"Install the Kerberos agent using Docker (more info below),"),Object(t.b)("li",{parentName:"ol"},"or you can install the Kerberos agent manually (machinery + web).")),Object(t.b)("p",null,"This section will focus on option 2, and will show you how to install the Kerberos agent manually."),Object(t.b)("h3",{id:"update-os"},"Update OS"),Object(t.b)("p",null,"Let's start with updating the OS, and installing a couple of packages."),Object(t.b)("blockquote",null,Object(t.b)("p",{parentName:"blockquote"},"We have tested the Raspbian installation on ",Object(t.b)("inlineCode",{parentName:"p"},"Raspbian GNU/Linux 10 (buster)"),". It might be that if you have a different version of Raspbian, you will need to install additional/different packages.")),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"apt"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"get"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"update"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," && "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"apt"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"get"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"install"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"y"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"ffmpeg")))),Object(t.b)("h3",{id:"machinery"},"Machinery"),Object(t.b)("p",null,"Download the debian file from the machinery repository."),Object(t.b)("blockquote",null,Object(t.b)("p",{parentName:"blockquote"},Object(t.b)("a",p({parentName:"p"},{href:"https://github.com/kerberos-io/machinery/releases"}),"https://github.com/kerberos-io/machinery/releases"))),Object(t.b)("p",null,"A ",Object(t.b)("inlineCode",{parentName:"p"},".deb")," file is available for every version of the Raspberry Pi. For example if you are using a Raspberry Pi 4 for version 2.8.0, execute following command. You can change the version and Raspberry Pi board to your needs."),Object(t.b)("blockquote",null,Object(t.b)("p",{parentName:"blockquote"},"Please make sure you pick the right board (rpi, rpi2, rpi3 or rpi4), and choose the version you want (e.g. 2.8.0). Replace below url, with your preferences.")),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"wget"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," https:"),Object(t.b)("span",p({parentName:"span"},{className:"mtk3"}),"//github.com/kerberos-io/machinery/releases/download/v2.8.0/rpi4-machinery-kerberosio-armhf-2.8.0.deb")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"dpkg"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"i"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"rpi4"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"machinery"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"kerberosio"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"armhf"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"2.8"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),".0."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"deb")))),Object(t.b)("p",null,"Download the x265 library (version 160) from the machinery repository, as Raspbian Buster 10 only ships with version 165. Make sure you select the right board."),Object(t.b)("blockquote",null,Object(t.b)("p",{parentName:"blockquote"},Object(t.b)("inlineCode",{parentName:"p"},"v2.8.0/rpi4-libx265.so.160")," this will download the libx265 shared library for the Raspberry Pi 4.")),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"wget"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," https:"),Object(t.b)("span",p({parentName:"span"},{className:"mtk3"}),"//github.com/kerberos-io/machinery/releases/download/v2.8.0/rpi4-libx265.so.160")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"mv"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"rpi4"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"libx265"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"so"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"160"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," /"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"usr"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"lib"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"arm"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"linux"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"gnueabihf"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"libx265"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"so"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"160")))),Object(t.b)("p",null,"Same applies for the libx264 library, download the right shared library."),Object(t.b)("blockquote",null,Object(t.b)("p",{parentName:"blockquote"},Object(t.b)("inlineCode",{parentName:"p"},"v2.8.0/rpi4-libx264.so.148")," this will download the libx264 shared library for the Raspberry Pi 4.")),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"wget"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," https:"),Object(t.b)("span",p({parentName:"span"},{className:"mtk3"}),"//github.com/kerberos-io/machinery/releases/download/v2.8.0/rpi4-libx264.so.148")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"mv"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"rpi4"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"libx264"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"so"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"148"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," /"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"usr"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"lib"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"arm"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"linux"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"gnueabihf"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"libx264"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"so"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"148")))),Object(t.b)("p",null,"If you wish to use the Raspberry Pi Camera Module, make sure ",Object(t.b)("a",p({parentName:"p"},{href:"https://www.raspberrypi.org/documentation/configuration/camera.md"}),"to enable it")," using ",Object(t.b)("inlineCode",{parentName:"p"},"sudo raspi-config"),"."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"raspi"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"config")))),Object(t.b)("p",null,"Enable machinery to start on boot, and start the service."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":""},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),"sudo systemctl enable kerberosio"),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),"sudo service kerberosio start"))),Object(t.b)("h3",{id:"web"},"Web"),Object(t.b)("p",null,"Before you can run the web interface, you'll need to download and configure a webserver. We recommend to use Nginx, as it is a light-weight and fast webserver. The web interface is written in PHP, so we also need to download PHP and some packages. Update the packages and kernel."),Object(t.b)("p",null,"Install Nginx and PHP (+extensions)."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"apt"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"get"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"install"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"y"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"nginx"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"curl"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"gd"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"fpm"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"cli"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"opcache"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"mbstring"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"xml"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"zip"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"mcrypt"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"readline")))),Object(t.b)("p",null,"Creating a Nginx config."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"rm"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"f"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," /"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"etc"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"nginx"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sites"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"enabled"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk15"}),"default")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"nano"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," /"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"etc"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"nginx"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sites"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"enabled"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"kerberosio"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"conf")))),Object(t.b)("p",null,"Copy and paste following config file; this file tells nginx where the web will be installed and that it requires PHP."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"server")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"{")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"listen"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"80"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"default_server"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"listen"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," [::]:"),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"80"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"default_server"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"root"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," /"),Object(t.b)("span",p({parentName:"span"},{className:"mtk4"}),"var"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"www"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/web/public;")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"server_name"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"kerberos"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"rpi"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"index"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"index"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"index"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"html"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"index"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"htm"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"location"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," /")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    {")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"autoindex"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"on"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"try_files"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"$uri"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"$uri"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/ /"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"index"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"?"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"$query_string"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    }")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"location"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," ~ \\."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php$")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    {")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"            fastcgi_pass "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"unix:"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"var"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"run"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"fpm"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sock"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"fastcgi_param"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"SCRIPT_FILENAME"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"$document_root$fastcgi_script_name"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"include"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"fastcgi_params"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    }")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"}")))),Object(t.b)("p",null,"Restart nginx"),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"service"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"nginx"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"restart")))),Object(t.b)("p",null,"Now we have installed all the dependencies, we can download the web interface source code."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"mkdir"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"p"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," /"),Object(t.b)("span",p({parentName:"span"},{className:"mtk4"}),"var"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"www"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/web && sudo chown www-data:"),Object(t.b)("span",p({parentName:"span"},{className:"mtk10"}),"www"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk10"}),"data"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," /"),Object(t.b)("span",p({parentName:"span"},{className:"mtk10"}),"var"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk10"}),"www"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk10"}),"web")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"cd"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," /"),Object(t.b)("span",p({parentName:"span"},{className:"mtk4"}),"var"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"www"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/web")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"u"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"www"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"data"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"wget"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," https:"),Object(t.b)("span",p({parentName:"span"},{className:"mtk3"}),"//github.com/kerberos-io/web/releases/download/v2.8.0/web.tar.gz")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"u"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"www"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"data"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"tar"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"xvf"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"web"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"tar"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"gz"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," .")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"chown"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"www"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"data"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"R"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"storage"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"bootstrap"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"cache"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"config"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"kerberos"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"chmod"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"R"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"775"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"storage"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"bootstrap"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"cache")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"chmod"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"0600"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"config"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"kerberos"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php")))),Object(t.b)("p",null,"Once everything is setup correctly, you should be able to browse towards the ip-address of your Raspberry Pi and see the Kerberos web interface."),Object(t.b)("h3",{id:"auto-removal"},"Auto removal"),Object(t.b)("p",null,"By default images or videos aren't removed automatically. This means that the Kerberos agent will keep writing to disk, even if there is no more space available on your SD card. When your SD card is full you'll be experiencing strange errors: a corrupt web interface, blank images or corrupt videos."),Object(t.b)("p",null,"To resolve this your should install a simple bash script and initiate a cronjob which continuously poll your filesystem, and start removing media when your disk is getting full."),Object(t.b)("p",null,"Create a bash script and copy following script."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"bash"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"nano /home/pi/autoremoval.sh")))),Object(t.b)("p",null,"Copy following script (make sure the partition is correct, this is the default one for a Raspberry Pi)."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"bash"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"partition=/dev/root")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"imagedir=/etc/opt/kerberosio/capture/")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk15"}),"if"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," [[ "),Object(t.b)("span",p({parentName:"span"},{className:"mtk8"}),"$(df -h "),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"|"),Object(t.b)("span",p({parentName:"span"},{className:"mtk8"})," grep "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"$partition"),Object(t.b)("span",p({parentName:"span"},{className:"mtk8"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"|"),Object(t.b)("span",p({parentName:"span"},{className:"mtk8"})," head -1 "),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"|"),Object(t.b)("span",p({parentName:"span"},{className:"mtk8"})," awk -F' ' '{ print $5/1 }' "),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"|"),Object(t.b)("span",p({parentName:"span"},{className:"mtk8"})," tr ['%'] [\"0\"])"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -gt 90 ]];")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk15"}),"then")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",p({parentName:"span"},{className:"mtk11"}),"echo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk8"}),'"Cleaning disk"')),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    find "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"$imagedir"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -type f | sort | head -n 100 | xargs -r rm -rf;")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk15"}),"fi"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")))),Object(t.b)("p",null,"Make the script executable."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"bash"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"chmod +x /home/pi/autoremoval.sh")))),Object(t.b)("p",null,"Initiate a cronjob, and select the nano editor."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"bash"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"crontab -e")))),Object(t.b)("p",null,"Append following line, to execute the autoremoval.sh script every 5min."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"bash"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"*/5 * * * * /bin/bash /home/pi/autoremoval.sh")))),Object(t.b)("h2",{id:"generic"},"Generic"),Object(t.b)("p",null,"If you want to install the Kerberos agent from source on your working station or server, either for development or running the software, this is the preferred installation procedure. We are assuming that you use a Linux OS, when using Mac OSX the installation is slightly different."),Object(t.b)("blockquote",null,Object(t.b)("p",{parentName:"blockquote"},"This was tested on a Ubuntu VM (18.04.3 (LTS) x64).")),Object(t.b)("h3",{id:"machinery-1"},"Machinery"),Object(t.b)("p",null,"Update the packages and kernel, and install some development tools."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"apt"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"get"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"y"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"update")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"apt"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"get"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"install"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"y"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"git"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"cmake"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"subversion"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"dh"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"autoreconf"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"libcurl4"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"openssl"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"dev"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"yasm"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"libx264"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"dev"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"pkg"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"config"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"libssl"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"dev")))),Object(t.b)("p",null,"Install the FFmpeg library with x264 support."),Object(t.b)("blockquote",null,Object(t.b)("p",{parentName:"blockquote"},"It's recommended to install FFmpeg 3.1. Later versions might give issues at compilation or run time.")),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"git"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"clone"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," https:"),Object(t.b)("span",p({parentName:"span"},{className:"mtk3"}),"//github.com/FFmpeg/FFmpeg ffmpeg")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"cd"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"ffmpeg"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," && "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"git"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"checkout"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"remotes"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"origin"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"release"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"3.1")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"./"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"configure"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," --"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"enable"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"gpl"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," --"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"enable"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"libx264"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," --"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"enable"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"shared"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," --"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"prefix"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"=/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"usr")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"make"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," && "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"make"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"install")))),Object(t.b)("p",null,"Go to your home directory, or any place your prefer and pull the machinery from Github. Afterwards create a build directory and start the compilation."),Object(t.b)("blockquote",null,Object(t.b)("p",{parentName:"blockquote"},"You can change the ",Object(t.b)("inlineCode",{parentName:"p"},"-j")," attribute of ",Object(t.b)("inlineCode",{parentName:"p"},"make -j8"),"to the number of cores of your compilation host.")),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"cd"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," && "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"git"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"clone"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," https:"),Object(t.b)("span",p({parentName:"span"},{className:"mtk3"}),"//github.com/kerberos-io/machinery")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"cd"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"machinery"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," && "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"mkdir"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"build"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," && "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"cd"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"build")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"cmake"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," .. && "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"make"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"j8"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," && "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"make"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"check"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," && "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"make"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"install")))),Object(t.b)("p",null,"After the machinery is build and installed succesfully, you can enable ",Object(t.b)("inlineCode",{parentName:"p"},"kerberosio")," to start on boot."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"systemctl"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"enable"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"kerberosio")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"systemctl"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"start"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"kerberosio")))),Object(t.b)("h3",{id:"web-1"},"Web"),Object(t.b)("p",null,"If you want to install the web, you'll need to have a webserver (e.g. Nginx) and PHP running with some extensions. You'll also need NodeJS and npm installed, to install Bower."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"cd"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," ~")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"curl"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sL"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," https:"),Object(t.b)("span",p({parentName:"span"},{className:"mtk3"}),"//deb.nodesource.com/setup_10.x | sudo bash -")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"apt"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"add"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"repository"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"y"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," ppa:"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"ondrej"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"apt"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"get"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"y"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"update")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"apt"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"get"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"install"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"y"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"git"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"cli"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"gd"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"mcrypt"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"curl"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"mbstring"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"dom"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"zip"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"fpm"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"nodejs")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"npm"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"g"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"install"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"bower")))),Object(t.b)("p",null,"Next we'll need to install Nginx, and create a config file."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"apt"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"get"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"y"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"install"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"nginx")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"rm"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"f"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," /"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"etc"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"nginx"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sites"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"enabled"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk15"}),"default")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"nano"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," /"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"etc"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"nginx"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sites"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"enabled"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk15"}),"default")))),Object(t.b)("p",null,"Assign Nginx to our web interface (which we will soon create)."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"server")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"{")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"listen"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"80"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"default_server"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"listen"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," [::]:"),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"80"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"default_server"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"root"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," /"),Object(t.b)("span",p({parentName:"span"},{className:"mtk4"}),"var"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"www"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/web/public;")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"server_name"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"kerberos"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"rpi"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"index"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"index"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"index"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"html"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"index"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"htm"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"location"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," /")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    {")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"autoindex"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"on"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"try_files"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"$uri"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"$uri"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/ /"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"index"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"?"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"$query_string"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    }")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"location"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," ~ \\."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php$")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    {")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"            fastcgi_pass "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"unix:"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"var"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"run"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php7"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"1"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"fpm"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sock"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"fastcgi_param"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"SCRIPT_FILENAME"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"$document_root$fastcgi_script_name"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"include"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"fastcgi_params"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    }")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"}")))),Object(t.b)("p",null,"Now we have all the dependencies installed we can clone the web repository to our working station."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"mkdir"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"p"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," /"),Object(t.b)("span",p({parentName:"span"},{className:"mtk4"}),"var"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"www")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"cd"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," /"),Object(t.b)("span",p({parentName:"span"},{className:"mtk4"}),"var"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"www"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," && sudo git clone https:"),Object(t.b)("span",p({parentName:"span"},{className:"mtk3"}),"//github.com/kerberos-io/web && cd web")))),Object(t.b)("p",null,"Install the PHP dependency manager, ",Object(t.b)("inlineCode",{parentName:"p"},"composer"),", the install all the needed dependencies."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"curl"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sS"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," https:"),Object(t.b)("span",p({parentName:"span"},{className:"mtk3"}),"//getcomposer.org/installer | sudo php")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"mv"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"composer"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"phar"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," /"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"usr"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"bin"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"composer")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"composer"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"install")))),Object(t.b)("p",null,"Change some permissions, to make sure we can write logging and caching files."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"chmod"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"R"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"777"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"storage")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"chmod"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"R"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"777"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"bootstrap"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"cache")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"chmod"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk7"}),"777"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"config"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"/"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"kerberos"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"php")))),Object(t.b)("p",null,"We will need to install a couple of more JavaScript libraries using bower."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"ts"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"cd"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"public")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"sudo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"bower"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," --"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"allow"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"-"),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"root"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"install")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"service"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"nginx"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"restart")))),Object(t.b)("p",null,"Once everything is setup correctly, you should be able to browse towards the ip-address of your Raspberry Pi and see the Kerberos web interface."),Object(t.b)("h3",{id:"auto-removal-1"},"Auto removal"),Object(t.b)("p",null,"By default images or videos aren't removed automatically. This means that the Kerberos agent will keep writing to disk, even if there is no more space available on your SD card. When your SD card is full you'll be experiencing strange errors: a corrupt web interface, blank images or corrupt videos."),Object(t.b)("p",null,"To resolve this your should install a simple bash script and initiate a cronjob which continuously poll your filesystem, and start removing media when your disk is getting full."),Object(t.b)("p",null,"Create a bash script and copy following script."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"bash"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"nano /home/[user]/autoremoval.sh")))),Object(t.b)("p",null,"Copy following script (make sure the partition is correct, this is the default one for a Raspberry Pi)."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"bash"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"partition=/dev/root")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"imagedir=/etc/opt/kerberosio/capture/")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk15"}),"if"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," [[ "),Object(t.b)("span",p({parentName:"span"},{className:"mtk8"}),"$(df -h "),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"|"),Object(t.b)("span",p({parentName:"span"},{className:"mtk8"})," grep "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"$partition"),Object(t.b)("span",p({parentName:"span"},{className:"mtk8"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"|"),Object(t.b)("span",p({parentName:"span"},{className:"mtk8"})," head -1 "),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"|"),Object(t.b)("span",p({parentName:"span"},{className:"mtk8"})," awk -F' ' '{ print $5/1 }' "),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"|"),Object(t.b)("span",p({parentName:"span"},{className:"mtk8"})," tr ['%'] [\"0\"])"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -gt 90 ]];")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk15"}),"then")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",p({parentName:"span"},{className:"mtk11"}),"echo"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",p({parentName:"span"},{className:"mtk8"}),'"Cleaning disk"')),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"    find "),Object(t.b)("span",p({parentName:"span"},{className:"mtk12"}),"$imagedir"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"})," -type f | sort | head -n 100 | xargs -r rm -rf;")),"\n",Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk15"}),"fi"),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),";")))),Object(t.b)("p",null,"Make the script executable."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"bash"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"chmod +x /home/[user]/autoremoval.sh")))),Object(t.b)("p",null,"Initiate a cronjob, and select the nano editor."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"bash"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"crontab -e")))),Object(t.b)("p",null,"Append following line, to execute the autoremoval.sh script every 5min."),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"bash"},Object(t.b)("code",p({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",p({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",p({parentName:"span"},{className:"mtk1"}),"*/5 * * * * /bin/bash /home/[user]/autoremoval.sh")))),Object(t.b)("style",{className:"vscode-highlight-styles"},"\n  :root {\n  --vscode-highlight-padding-v: 1rem;\n  --vscode-highlight-padding-h: 1.5rem;\n  --vscode-highlight-padding-top: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-right: var(--vscode-highlight-padding-h);\n  --vscode-highlight-padding-bottom: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-left: var(--vscode-highlight-padding-h);\n  --vscode-highlight-border-radius: 8px;\n\n  --vscode-highlight-line-highlighted-background-color: transparent;\n  --vscode-highlight-line-highlighted-border-width: 4px;\n  --vscode-highlight-line-highlighted-border-color: transparent;\n}\n\n.vscode-highlight {\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  padding-top: 1rem;\n  padding-top: var(--vscode-highlight-padding-top);\n  padding-bottom: 1rem;\n  padding-bottom: var(--vscode-highlight-padding-bottom);\n  border-radius: 8px;\n  border-radius: var(--vscode-highlight-border-radius);\n  font-feature-settings: normal;\n}\n\n.vscode-highlight-code {\n  display: inline-block;\n  min-width: 100%;\n}\n\n.vscode-highlight-line {\n  display: inline-block;\n  box-sizing: border-box;\n  width: 100%;\n  padding-left: 1.5rem;\n  padding-left: var(--vscode-highlight-padding-left);\n  padding-right: 1.5rem;\n  padding-right: var(--vscode-highlight-padding-right);\n}\n\n.vscode-highlight-line-highlighted {\n  background-color: var(--vscode-highlight-line-highlighted-background-color);\n  box-shadow: inset var(--vscode-highlight-line-highlighted-border-width) 0 0 0 var(--vscode-highlight-line-highlighted-border-color);\n}\n\n  .default-dark {\nbackground-color: #1E1E1E;\ncolor: #D4D4D4;\n}\n\n.default-dark .mtk1 { color: #D4D4D4; }\n.default-dark .mtk2 { color: #1E1E1E; }\n.default-dark .mtk3 { color: #6A9955; }\n.default-dark .mtk4 { color: #569CD6; }\n.default-dark .mtk5 { color: #D16969; }\n.default-dark .mtk6 { color: #D7BA7D; }\n.default-dark .mtk7 { color: #B5CEA8; }\n.default-dark .mtk8 { color: #CE9178; }\n.default-dark .mtk9 { color: #646695; }\n.default-dark .mtk10 { color: #4EC9B0; }\n.default-dark .mtk11 { color: #DCDCAA; }\n.default-dark .mtk12 { color: #9CDCFE; }\n.default-dark .mtk13 { color: #000080; }\n.default-dark .mtk14 { color: #F44747; }\n.default-dark .mtk15 { color: #C586C0; }\n.default-dark .mtk16 { color: #6796E6; }\n.default-dark .mtk17 { color: #808080; }\n.default-dark .mtki { font-style: italic; }\n.default-dark .mtkb { font-weight: bold; }\n.default-dark .mtku { text-decoration: underline; text-underline-position: under; }\n"))}void 0!==N&&N&&N===Object(N)&&Object.isExtensible(N)&&!N.hasOwnProperty("__filemeta")&&Object.defineProperty(N,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"src/open-source/installation-advanced.mdx"}}),N.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-open-source-installation-advanced-mdx-4c101921b2d44c097a1c.js.map