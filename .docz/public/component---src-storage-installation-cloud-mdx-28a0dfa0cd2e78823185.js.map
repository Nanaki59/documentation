{"version":3,"sources":["webpack:///../public/images/kerberos-storage-architecture-kubernetes-cloud.png","webpack:///../public/images/factory/kerberos-factory-loginpage.png","webpack:///../src/storage/installation-cloud.mdx"],"names":["module","exports","_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","className","src","width","height","frameBorder","allow","allowFullScreen","alt","require","isMDXComponent"],"mappings":"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","file":"component---src-storage-installation-cloud-mdx-28a0dfa0cd2e78823185.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/kerberos-storage-architecture-kubernetes-cloud-7bd0848c172dd4fbdd13711a29f8bd8d.png\";","module.exports = __webpack_public_path__ + \"static/kerberos-factory-loginpage-0887dc5c26ca2d07a6a0355c41434fa1.png\";","import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/i353408/Vagrant/www/repos/documentation/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"introduction\"\n    }}>{`Introduction`}</h1>\n    <p>{`If not already the case, start by installing a Kubernetes cluster. This can be done on one of the hyperscalers (`}<strong parentName=\"p\">{`AWS`}</strong>{`, `}<strong parentName=\"p\">{`GCP`}</strong>{` or `}<strong parentName=\"p\">{`Azure`}</strong>{`), cloud providers (Digital Ocean, Scaleway, etc) or on-premise in your own private network.`}</p>\n    <br />\n    <div className='embed-container'><iframe src=\"https://player.vimeo.com/video/404813147\" width=\"640\" height=\"400\" frameBorder=\"0\" allow=\"autoplay; fullscreen\" allowFullScreen></iframe></div>\n    <br /><br />\n    <h1 {...{\n      \"id\": \"prerequisites\"\n    }}>{`Prerequisites`}</h1>\n    <p>{`Kerberos Storage is the storage component for Kerberos Enterprise. It is used to store your recordings at a central place, in the storage system you prefer. Next to that it can be used for extension and integration capabilities. Learn more about `}<a parentName=\"p\" {...{\n        \"href\": \"/storage\"\n      }}>{`Kerberos Storage here`}</a>{`.`}</p>\n    <p>{`To use Kerberos Storage, you will need to have Kerberos Enterprise installed, and deployments running. Independent from that one can also use the Kerberos Storage API `}<inlineCode parentName=\"p\">{`/swagger/index.html`}</inlineCode>{` to send recordings from a custom build VMS.`}</p>\n    <h1 {...{\n      \"id\": \"installation\"\n    }}>{`Installation`}</h1>\n    <p>{`Similar to Kerberos Enterprise, Kerberos Storage, requires some initial components to be installed. If you will run Kerberos Storage in the same cluster as where you have Kerberos Enterprise running, there is not much to do.`}</p>\n    <p><img alt=\"architecture kubernetes\" src={require(\"../../public/images/kerberos-storage-architecture-kubernetes-cloud.png\")} /></p>\n    <p>{`However if you plan to run Kerberos Storage in a different cluster (which is perfectly possible), you will need to make sure you complete the initial setup of `}<a parentName=\"p\" {...{\n        \"href\": \"/enterprise/installation\"\n      }}>{`Kerberos Enterprise installation`}</a>{`. To be more specific you will need the following components running:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Helm`}</li>\n      <li parentName=\"ul\">{`MongoDB`}</li>\n      <li parentName=\"ul\">{`Traefik`}</li>\n    </ul>\n    <p>{`Once this is done start by cloning the configurations from our `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/kerberos-io/storage\"\n      }}>{`Github repo`}</a>{`.`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`git clone https://github.com/kerberos-io/storage`}</span></code></pre>\n    <h2 {...{\n      \"id\": \"storage\"\n    }}>{`Storage`}</h2>\n    <p>{`Similar to Kerberos Enterprise, Kerberos Storage is managed through a web app. It allows you to add storage providers (S3, minio, etc), add queues for messaging, accounts for security and much more. It also comes with API's, which you can use to interact and retrieve information from Kerberos Storage. All is documented in the form of Swagger APIs `}<inlineCode parentName=\"p\">{`/swagger/index.html`}</inlineCode>{`.`}</p>\n    <p>{`Before installing Kerberos Storage, open the `}<inlineCode parentName=\"p\">{`./storage/yaml/deployment.yaml`}</inlineCode>{` configuration file. At the bottom file you will find two endpoints, similar to the Traefik config file below. Update the domain names to your own domain, and add these to your DNS server or `}<inlineCode parentName=\"p\">{`/etc/hosts`}</inlineCode>{` file (and point to the same IP as the Traefik EXTERNAL-IP).`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    spec:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`      rules:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`-->   - host: storage.domain.com`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`        http:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`          paths:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`          - path: /`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`            backend:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`              serviceName: kerberos-storage`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`              servicePort: 80`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`-->   - host: api.storage.domain.com`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`        http:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`          paths:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`          - path: /`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`            backend:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`              serviceName: kerberos-storage`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`              servicePort: 8081`}</span></code></pre>\n    <p>{`If you are using Ingress Nginx, do not forgot to comment `}<inlineCode parentName=\"p\">{`Traefik`}</inlineCode>{` and uncomment `}<inlineCode parentName=\"p\">{`Ingress Nginx`}</inlineCode>{`. Also note the extra argument `}<inlineCode parentName=\"p\">{`proxy-body-size`}</inlineCode>{`, this is required for not reaching the default 1MB body size limit. If you do not enable this, you might experience `}<inlineCode parentName=\"p\">{`413`}</inlineCode>{` errors in your Kerberos Enterprise agents.`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`apiVersion: extensions/v1beta1`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`kind: Ingress`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`metadata:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`  name: kerberos-storage`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`  annotations:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    #kubernetes.io/ingress.class: traefik`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    kubernetes.io/ingress.class: nginx`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    nginx.ingress.kubernetes.io/proxy-body-size: 200m`}</span></code></pre>\n    <p>{`Next to that modify the MongoDB credentials, and make sure they match the credentials of your MongoDB instance.`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    - name: MONGODB_USERNAME`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`      value: \"root\"`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    - name: MONGODB_PASSWORD`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`-->   value: \"xxxxxxxxxx\"`}</span></code></pre>\n    <p>{`Once you have corrected the DNS names and MongoDB credentials, install Kerberos Storage inside your cluster.`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`kubectl apply -f ./storage/yaml/deployment.yaml`}</span></code></pre>\n    <h2 {...{\n      \"id\": \"test-out-configuration\"\n    }}>{`Test out configuration`}</h2>\n    <p>{`If everything worked out as expected, you should now have following services in your cluster:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`MongoDB`}</li>\n      <li parentName=\"ul\">{`Traefik`}</li>\n      <li parentName=\"ul\">{`Storage`}</li>\n      <li parentName=\"ul\">{`Enterprise (optional)`}</li>\n    </ul>\n    <p>{`It should look like this.`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`$ kubectl get pods`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`NAME                              READY   STATUS    RESTARTS   AGE`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`kerberos-storage-6f5c877d7c-hf77p 1/1     Running   0          2d11h`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`mongodb-55566dc65c-xgmns          2/2     Running   0          4d13h`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`traefik-7d566ccc47-mwslb          1/1     Running   0          4d12h`}</span></code></pre>\n    <h2 {...{\n      \"id\": \"access-the-system\"\n    }}>{`Access the system`}</h2>\n    <p>{`Once everything is configured correctly your cluster and DNS or `}<inlineCode parentName=\"p\">{`/etc/hosts`}</inlineCode>{` file, you should be able to access the Storage application. By navigating to the Storage domain `}<inlineCode parentName=\"p\">{`storage.domain.com`}</inlineCode>{` in your browser you will see the Storage login page showing up.`}</p>\n    <p><img alt=\"Storage\" src={require(\"../../public/images/factory/kerberos-factory-loginpage.png\")} /></p>\n\n    <style {...{\n      \"className\": \"vscode-highlight-styles\"\n    }}>{`\n  :root {\n  --vscode-highlight-padding-v: 1rem;\n  --vscode-highlight-padding-h: 1.5rem;\n  --vscode-highlight-padding-top: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-right: var(--vscode-highlight-padding-h);\n  --vscode-highlight-padding-bottom: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-left: var(--vscode-highlight-padding-h);\n  --vscode-highlight-border-radius: 8px;\n\n  --vscode-highlight-line-highlighted-background-color: transparent;\n  --vscode-highlight-line-highlighted-border-width: 4px;\n  --vscode-highlight-line-highlighted-border-color: transparent;\n}\n\n.vscode-highlight {\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  padding-top: 1rem;\n  padding-top: var(--vscode-highlight-padding-top);\n  padding-bottom: 1rem;\n  padding-bottom: var(--vscode-highlight-padding-bottom);\n  border-radius: 8px;\n  border-radius: var(--vscode-highlight-border-radius);\n  font-feature-settings: normal;\n}\n\n.vscode-highlight-code {\n  display: inline-block;\n  min-width: 100%;\n}\n\n.vscode-highlight-line {\n  display: inline-block;\n  box-sizing: border-box;\n  width: 100%;\n  padding-left: 1.5rem;\n  padding-left: var(--vscode-highlight-padding-left);\n  padding-right: 1.5rem;\n  padding-right: var(--vscode-highlight-padding-right);\n}\n\n.vscode-highlight-line-highlighted {\n  background-color: var(--vscode-highlight-line-highlighted-background-color);\n  box-shadow: inset var(--vscode-highlight-line-highlighted-border-width) 0 0 0 var(--vscode-highlight-line-highlighted-border-color);\n}\n\n  .default-dark {\nbackground-color: #1E1E1E;\ncolor: #D4D4D4;\n}\n`}</style>\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}