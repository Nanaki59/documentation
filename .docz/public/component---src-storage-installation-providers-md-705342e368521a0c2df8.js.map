{"version":3,"sources":["webpack:///../src/storage/installation-providers.md","webpack:///../public/images/minio/webapp.png"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","alt","src","require","isMDXComponent","module","exports"],"mappings":"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","file":"component---src-storage-installation-providers-md-705342e368521a0c2df8.js","sourcesContent":["import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/i353408/Vagrant/www/repos/documentation/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"kerberos-storage---providers\"\n    }}>{`Kerberos Storage - Providers`}</h1>\n    <p>{`Kerberos Storage allows you to attach one or more (and different) storage providers. These providers could be in the cloud like S3, Google Cloud Storage or Azure blob storage, or providers on premise such as Minio.`}</p>\n    <p>{`Depending on your use case: Kerberos Storage Cloud or Kerberos Storage Edge, you will opt for a specific storage provider. For example in the case Kerberos Storage Edge, it makes sense to store your recordings also at the edge. The accomplish this you could for example setup a Minio instance.`}</p>\n    <p>{`Below you can find a detailed step-by-step guide to setup different storage providers.`}</p>\n    <h2 {...{\n      \"id\": \"prerequisites\"\n    }}>{`Prerequisites`}</h2>\n    <p>{`This installation guide assumes you have setup Kerberos Storage properly.`}</p>\n    <h2 {...{\n      \"id\": \"installation-minio\"\n    }}>{`Installation Minio`}</h2>\n    <p>{`Minio is the recommended solution if you want to persist your data at the edge. To setup minio you just have to install a few components. Let's start with getting the configuration files (if not already done) for setting up Minio.`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`git clone https://github.com/kerberos-io/storage`}</span></code></pre>\n    <p>{`Now we have the configrations available, let's use start with creating a `}<inlineCode parentName=\"p\">{`local-storage`}</inlineCode>{` volume using `}<inlineCode parentName=\"p\">{`./storage/yaml/minio/volume.yaml`}</inlineCode>{` file. When opening the file we should focus on following attributes.`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`  spec:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    capacity:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`-->   storage: 20Gi`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    accessModes:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    - ReadWriteOnce`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    persistentVolumeReclaimPolicy: Recycle`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    storageClassName: hdd`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    local:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`-->   path: /home/minio`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    nodeAffinity:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`      required:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`        nodeSelectorTerms:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`        - matchExpressions:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`          - key: kubernetes.io/hostname`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`            operator: In`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`            values:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`-->         - hostname`}</span></code></pre>\n    <p>{`Adapt the storage capacity to the amount of storage you want to assign to Minio, change the local path to the directory where you want to persist your data, and to finish make sure the hostname is the hostname of your node (where the directory is located). Once ready we can create the `}<inlineCode parentName=\"p\">{`local.path`}</inlineCode>{` directory and create the volume.`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`mkdir /home/minio`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`kubectl apply -f ./storage/yaml/minio/volume.yaml`}</span></code></pre>\n    <p>{`Next create Persistent Volume Claim (PVC), open the `}<inlineCode parentName=\"p\">{`./storage/yaml/minio/volume.yaml`}</inlineCode>{` file and make sure the storage is aligned with the configurations of you `}<inlineCode parentName=\"p\">{`volume.yaml`}</inlineCode>{`.`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`  resources:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    # This is the request for storage. Should be available in the cluster.`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    requests:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`-->   storage: 20Gi    `}</span></code></pre>\n    <p>{`Once ready, create the PVC.`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`kubectl apply -f ./storage/yaml/minio/pvc.yaml`}</span></code></pre>\n    <p>{`Ok, let us finish this and deploy the Kerberos Storage deployment. Before applying, we have to make sure the Ingress hostname is aligned. Open the `}<inlineCode parentName=\"p\">{`./storage/yaml/minio/deployment.yaml`}</inlineCode>{` file and scroll down until you see the Ingress.`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`  spec:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    rules:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`--> - host: minio.domain.com`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`      http:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`        paths:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`        - path: /`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`          backend:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`            serviceName: minio`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`            servicePort: 9000`}</span></code></pre>\n    <p>{`Adapt the hostname to your needs, and apply the `}<inlineCode parentName=\"p\">{`deployment.yaml`}</inlineCode>{` file when appropriate.`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`kubectl apply -f ./storage/yaml/minio/deployment.yaml`}</span></code></pre>\n    <p>{`You should now see Minio being installed, and able to access it from your favourite web browser. You can use with the credentials you have defined in the `}<inlineCode parentName=\"p\">{`deployment.yaml file.`}</inlineCode></p>\n    <p><img alt=\"minio kubernetes\" src={require(\"../../public/images/minio/webapp.png\")} /></p>\n\n    <style {...{\n      \"className\": \"vscode-highlight-styles\"\n    }}>{`\n  :root {\n  --vscode-highlight-padding-v: 1rem;\n  --vscode-highlight-padding-h: 1.5rem;\n  --vscode-highlight-padding-top: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-right: var(--vscode-highlight-padding-h);\n  --vscode-highlight-padding-bottom: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-left: var(--vscode-highlight-padding-h);\n  --vscode-highlight-border-radius: 8px;\n\n  --vscode-highlight-line-highlighted-background-color: transparent;\n  --vscode-highlight-line-highlighted-border-width: 4px;\n  --vscode-highlight-line-highlighted-border-color: transparent;\n}\n\n.vscode-highlight {\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  padding-top: 1rem;\n  padding-top: var(--vscode-highlight-padding-top);\n  padding-bottom: 1rem;\n  padding-bottom: var(--vscode-highlight-padding-bottom);\n  border-radius: 8px;\n  border-radius: var(--vscode-highlight-border-radius);\n  font-feature-settings: normal;\n}\n\n.vscode-highlight-code {\n  display: inline-block;\n  min-width: 100%;\n}\n\n.vscode-highlight-line {\n  display: inline-block;\n  box-sizing: border-box;\n  width: 100%;\n  padding-left: 1.5rem;\n  padding-left: var(--vscode-highlight-padding-left);\n  padding-right: 1.5rem;\n  padding-right: var(--vscode-highlight-padding-right);\n}\n\n.vscode-highlight-line-highlighted {\n  background-color: var(--vscode-highlight-line-highlighted-background-color);\n  box-shadow: inset var(--vscode-highlight-line-highlighted-border-width) 0 0 0 var(--vscode-highlight-line-highlighted-border-color);\n}\n\n  .default-dark {\nbackground-color: #1E1E1E;\ncolor: #D4D4D4;\n}\n`}</style>\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","module.exports = __webpack_public_path__ + \"static/webapp-e9018c4186d6418783737a9b5188e38c.png\";"],"sourceRoot":""}