(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{FwQp:function(e,a,t){"use strict";t.r(a),t.d(a,"_frontmatter",(function(){return c})),t.d(a,"default",(function(){return h}));t("5hJT"),t("W1QL"),t("K/PF"),t("t91x"),t("75LO"),t("PJhk"),t("mXGw");var n=t("/FXl"),i=t("TjRS");t("aD51");function o(){return(o=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var c={};void 0!==c&&c&&c===Object(c)&&Object.isExtensible(c)&&!c.hasOwnProperty("__filemeta")&&Object.defineProperty(c,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"src/storage/installation.mdx"}});var s={_frontmatter:c},l=i.a;function h(e){var a=e.components,i=function(e,a){if(null==e)return{};var t,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(i[t]=e[t]);return i}(e,["components"]);return Object(n.b)(l,o({},s,i,{components:a,mdxType:"MDXLayout"}),Object(n.b)("h1",{id:"installation"},"Installation"),Object(n.b)("p",null,"Before proceding make sure you have succesfully installed Kerberos Enterprise inside your Kubernetes cluster. The installation guide of Kerberos Storage, expects to have several components already installed: MongoDB, Traefik, Helm, etc."),Object(n.b)("p",null,"Once this is done startt by cloning the configrations from our Github repo."),Object(n.b)("pre",{className:"default-dark vscode-highlight","data-language":""},Object(n.b)("code",o({parentName:"pre"},{className:"vscode-highlight-code"}),Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"git clone https://github.com/kerberos-io/storage"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"cd storage"))),Object(n.b)("h2",{id:"storage"},"Storage"),Object(n.b)("p",null,"The last step is to install the storage service. Kerberos Storage is managed through a simple web interface. It allows you to add your storage providers, add queues for messaging, accounts for security and much more."),Object(n.b)("p",null,"Before installing Kerberos Storage, open the ",Object(n.b)("inlineCode",{parentName:"p"},"yaml/kubernetes.yaml")," configuration file. At the bottom file you will find two endpoints, similar to the traefik config file. Update the domain names to your own domain, and add these to your DNS server (pointing to the same IP as the traefik EXTERNAL-IP)."),Object(n.b)("pre",{className:"default-dark vscode-highlight","data-language":""},Object(n.b)("code",o({parentName:"pre"},{className:"vscode-highlight-code"}),Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"    spec:"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"      rules:"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"--\x3e   - host: storage.domain.com"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"        http:"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"          paths:"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"          - path: /"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"            backend:"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"              serviceName: kerberos-storage"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"              servicePort: 80"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"--\x3e   - host: api.storage.domain.com"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"        http:"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"          paths:"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"          - path: /"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"            backend:"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"              serviceName: kerberos-storage"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"              servicePort: 8081"))),Object(n.b)("p",null,"Modify the MongoDB credentials, and make sure they match the credentials of your MongoDB instance."),Object(n.b)("pre",{className:"default-dark vscode-highlight","data-language":""},Object(n.b)("code",o({parentName:"pre"},{className:"vscode-highlight-code"}),Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"    - name: MONGODB_USERNAME"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),'      value: "root"'),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"    - name: MONGODB_PASSWORD"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),'--\x3e   value: "xxxxxxxxxx"'))),Object(n.b)("p",null,"Once you have corrected the DNS names and MongoDB credentials, install Kerberos Storage inside your cluster."),Object(n.b)("pre",{className:"default-dark vscode-highlight","data-language":""},Object(n.b)("code",o({parentName:"pre"},{className:"vscode-highlight-code"}),Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"kubectl apply -f ./yaml/kubernetes.yaml"))),Object(n.b)("h2",{id:"test-out-configuration"},"Test out configuration"),Object(n.b)("p",null,"If everything worked out as expected, you should now have following services in your cluster:"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"MongoDB"),Object(n.b)("li",{parentName:"ul"},"Traefik"),Object(n.b)("li",{parentName:"ul"},"Storage")),Object(n.b)("p",null,"It should look like this."),Object(n.b)("pre",{className:"default-dark vscode-highlight","data-language":""},Object(n.b)("code",o({parentName:"pre"},{className:"vscode-highlight-code"}),Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"$ kubectl get pods"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"NAME                              READY   STATUS    RESTARTS   AGE"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"kerberos-storage-6f5c877d7c-hf77p 1/1     Running   0          2d11h"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"mongodb-55566dc65c-xgmns          2/2     Running   0          4d13h"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"traefik-7d566ccc47-mwslb          1/1     Running   0          4d12h"))),Object(n.b)("h2",{id:"access-the-system"},"Access the system"),Object(n.b)("p",null,"Once everything is configured correctly your cluster and DNS, you should be able to access the Storage application. By navigating to the Storage domain ",Object(n.b)("inlineCode",{parentName:"p"},"storage.domain.com")," in your browser you will see the Storage login page showing up."),Object(n.b)("p",null,Object(n.b)("img",{alt:"Factory",src:t("cB/m")})),Object(n.b)("h2",{id:"storage-cleanup"},"Storage Cleanup"),Object(n.b)("p",null,"Next to storing your recordings, cleaning them up is also important. Therefore we have build a cleanup service called Kerberos Storage Cleanup, which you can use to remove recordings based on different rules."),Object(n.b)("p",null,"Modify the MongoDB credentials, as you did for the Kerberos Storage yaml file."),Object(n.b)("pre",{className:"default-dark vscode-highlight","data-language":""},Object(n.b)("code",o({parentName:"pre"},{className:"vscode-highlight-code"}),Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"    - name: MONGODB_USERNAME"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),'      value: "root"'),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"    - name: MONGODB_PASSWORD"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),'--\x3e   value: "xxxxxxxxxx"'))),Object(n.b)("p",null,"Execute following script to deploy the cleanup job."),Object(n.b)("pre",{className:"default-dark vscode-highlight","data-language":""},Object(n.b)("code",o({parentName:"pre"},{className:"vscode-highlight-code"}),Object(n.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"kubectl apply -f ./yaml/kubernetes-cleanup.yaml"))),Object(n.b)("style",{className:"vscode-highlight-styles"},"\n  :root {\n  --vscode-highlight-padding-v: 1rem;\n  --vscode-highlight-padding-h: 1.5rem;\n  --vscode-highlight-padding-top: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-right: var(--vscode-highlight-padding-h);\n  --vscode-highlight-padding-bottom: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-left: var(--vscode-highlight-padding-h);\n  --vscode-highlight-border-radius: 8px;\n\n  --vscode-highlight-line-highlighted-background-color: transparent;\n  --vscode-highlight-line-highlighted-border-width: 4px;\n  --vscode-highlight-line-highlighted-border-color: transparent;\n}\n\n.vscode-highlight {\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  padding-top: 1rem;\n  padding-top: var(--vscode-highlight-padding-top);\n  padding-bottom: 1rem;\n  padding-bottom: var(--vscode-highlight-padding-bottom);\n  border-radius: 8px;\n  border-radius: var(--vscode-highlight-border-radius);\n  font-feature-settings: normal;\n}\n\n.vscode-highlight-code {\n  display: inline-block;\n  min-width: 100%;\n}\n\n.vscode-highlight-line {\n  display: inline-block;\n  box-sizing: border-box;\n  width: 100%;\n  padding-left: 1.5rem;\n  padding-left: var(--vscode-highlight-padding-left);\n  padding-right: 1.5rem;\n  padding-right: var(--vscode-highlight-padding-right);\n}\n\n.vscode-highlight-line-highlighted {\n  background-color: var(--vscode-highlight-line-highlighted-background-color);\n  box-shadow: inset var(--vscode-highlight-line-highlighted-border-width) 0 0 0 var(--vscode-highlight-line-highlighted-border-color);\n}\n\n  .default-dark {\nbackground-color: #1E1E1E;\ncolor: #D4D4D4;\n}\n"))}void 0!==h&&h&&h===Object(h)&&Object.isExtensible(h)&&!h.hasOwnProperty("__filemeta")&&Object.defineProperty(h,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"src/storage/installation.mdx"}}),h.isMDXComponent=!0},"cB/m":function(e,a,t){e.exports=t.p+"static/kerberos-factory-loginpage-0887dc5c26ca2d07a6a0355c41434fa1.png"}}]);
//# sourceMappingURL=component---src-storage-installation-mdx-8364eca8528b5ebccd63.js.map