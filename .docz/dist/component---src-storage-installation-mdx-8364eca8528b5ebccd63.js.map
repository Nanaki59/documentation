{"version":3,"sources":["webpack:///../src/storage/installation.mdx","webpack:///../public/images/factory/kerberos-factory-loginpage.png"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","alt","src","require","isMDXComponent","module","exports"],"mappings":"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","file":"component---src-storage-installation-mdx-8364eca8528b5ebccd63.js","sourcesContent":["import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/i353408/Vagrant/www/repos/documentation/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"installation\"\n    }}>{`Installation`}</h1>\n    <p>{`Before proceding make sure you have succesfully installed Kerberos Enterprise inside your Kubernetes cluster. The installation guide of Kerberos Storage, expects to have several components already installed: MongoDB, Traefik, Helm, etc.`}</p>\n    <p>{`Once this is done startt by cloning the configrations from our Github repo.`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`git clone https://github.com/kerberos-io/storage`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`cd storage`}</span></code></pre>\n    <h2 {...{\n      \"id\": \"storage\"\n    }}>{`Storage`}</h2>\n    <p>{`The last step is to install the storage service. Kerberos Storage is managed through a simple web interface. It allows you to add your storage providers, add queues for messaging, accounts for security and much more.`}</p>\n    <p>{`Before installing Kerberos Storage, open the `}<inlineCode parentName=\"p\">{`yaml/kubernetes.yaml`}</inlineCode>{` configuration file. At the bottom file you will find two endpoints, similar to the traefik config file. Update the domain names to your own domain, and add these to your DNS server (pointing to the same IP as the traefik EXTERNAL-IP).`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    spec:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`      rules:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`-->   - host: storage.domain.com`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`        http:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`          paths:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`          - path: /`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`            backend:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`              serviceName: kerberos-storage`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`              servicePort: 80`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`-->   - host: api.storage.domain.com`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`        http:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`          paths:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`          - path: /`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`            backend:`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`              serviceName: kerberos-storage`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`              servicePort: 8081`}</span></code></pre>\n    <p>{`Modify the MongoDB credentials, and make sure they match the credentials of your MongoDB instance.`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    - name: MONGODB_USERNAME`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`      value: \"root\"`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    - name: MONGODB_PASSWORD`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`-->   value: \"xxxxxxxxxx\"`}</span></code></pre>\n    <p>{`Once you have corrected the DNS names and MongoDB credentials, install Kerberos Storage inside your cluster.`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`kubectl apply -f ./yaml/kubernetes.yaml`}</span></code></pre>\n    <h2 {...{\n      \"id\": \"test-out-configuration\"\n    }}>{`Test out configuration`}</h2>\n    <p>{`If everything worked out as expected, you should now have following services in your cluster:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`MongoDB`}</li>\n      <li parentName=\"ul\">{`Traefik`}</li>\n      <li parentName=\"ul\">{`Storage`}</li>\n    </ul>\n    <p>{`It should look like this.`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`$ kubectl get pods`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`NAME                              READY   STATUS    RESTARTS   AGE`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`kerberos-storage-6f5c877d7c-hf77p 1/1     Running   0          2d11h`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`mongodb-55566dc65c-xgmns          2/2     Running   0          4d13h`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`traefik-7d566ccc47-mwslb          1/1     Running   0          4d12h`}</span></code></pre>\n    <h2 {...{\n      \"id\": \"access-the-system\"\n    }}>{`Access the system`}</h2>\n    <p>{`Once everything is configured correctly your cluster and DNS, you should be able to access the Storage application. By navigating to the Storage domain `}<inlineCode parentName=\"p\">{`storage.domain.com`}</inlineCode>{` in your browser you will see the Storage login page showing up.`}</p>\n    <p><img alt=\"Factory\" src={require(\"../../public/images/factory/kerberos-factory-loginpage.png\")} /></p>\n    <h2 {...{\n      \"id\": \"storage-cleanup\"\n    }}>{`Storage Cleanup`}</h2>\n    <p>{`Next to storing your recordings, cleaning them up is also important. Therefore we have build a cleanup service called Kerberos Storage Cleanup, which you can use to remove recordings based on different rules.`}</p>\n    <p>{`Modify the MongoDB credentials, as you did for the Kerberos Storage yaml file.`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    - name: MONGODB_USERNAME`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`      value: \"root\"`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`    - name: MONGODB_PASSWORD`}</span>{`\n`}<span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`-->   value: \"xxxxxxxxxx\"`}</span></code></pre>\n    <p>{`Execute following script to deploy the cleanup job.`}</p>\n    <pre {...{\n      \"className\": \"default-dark vscode-highlight\",\n      \"data-language\": \"\"\n    }}><code parentName=\"pre\" {...{\n        \"className\": \"vscode-highlight-code\"\n      }}><span parentName=\"code\" {...{\n          \"className\": \"vscode-highlight-line\"\n        }}>{`kubectl apply -f ./yaml/kubernetes-cleanup.yaml`}</span></code></pre>\n\n    <style {...{\n      \"className\": \"vscode-highlight-styles\"\n    }}>{`\n  :root {\n  --vscode-highlight-padding-v: 1rem;\n  --vscode-highlight-padding-h: 1.5rem;\n  --vscode-highlight-padding-top: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-right: var(--vscode-highlight-padding-h);\n  --vscode-highlight-padding-bottom: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-left: var(--vscode-highlight-padding-h);\n  --vscode-highlight-border-radius: 8px;\n\n  --vscode-highlight-line-highlighted-background-color: transparent;\n  --vscode-highlight-line-highlighted-border-width: 4px;\n  --vscode-highlight-line-highlighted-border-color: transparent;\n}\n\n.vscode-highlight {\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  padding-top: 1rem;\n  padding-top: var(--vscode-highlight-padding-top);\n  padding-bottom: 1rem;\n  padding-bottom: var(--vscode-highlight-padding-bottom);\n  border-radius: 8px;\n  border-radius: var(--vscode-highlight-border-radius);\n  font-feature-settings: normal;\n}\n\n.vscode-highlight-code {\n  display: inline-block;\n  min-width: 100%;\n}\n\n.vscode-highlight-line {\n  display: inline-block;\n  box-sizing: border-box;\n  width: 100%;\n  padding-left: 1.5rem;\n  padding-left: var(--vscode-highlight-padding-left);\n  padding-right: 1.5rem;\n  padding-right: var(--vscode-highlight-padding-right);\n}\n\n.vscode-highlight-line-highlighted {\n  background-color: var(--vscode-highlight-line-highlighted-background-color);\n  box-shadow: inset var(--vscode-highlight-line-highlighted-border-width) 0 0 0 var(--vscode-highlight-line-highlighted-border-color);\n}\n\n  .default-dark {\nbackground-color: #1E1E1E;\ncolor: #D4D4D4;\n}\n`}</style>\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","module.exports = __webpack_public_path__ + \"static/kerberos-factory-loginpage-0887dc5c26ca2d07a6a0355c41434fa1.png\";"],"sourceRoot":""}