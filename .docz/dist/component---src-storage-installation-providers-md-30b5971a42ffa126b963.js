(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{YbOW:function(e,a,t){"use strict";t.r(a),t.d(a,"_frontmatter",(function(){return s})),t.d(a,"default",(function(){return h}));t("5hJT"),t("W1QL"),t("K/PF"),t("t91x"),t("75LO"),t("PJhk"),t("mXGw");var i=t("/FXl"),n=t("TjRS");t("aD51");function o(){return(o=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var s={};void 0!==s&&s&&s===Object(s)&&Object.isExtensible(s)&&!s.hasOwnProperty("__filemeta")&&Object.defineProperty(s,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"src/storage/installation-providers.md"}});var l={_frontmatter:s},c=n.a;function h(e){var a=e.components,n=function(e,a){if(null==e)return{};var t,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,["components"]);return Object(i.b)(c,o({},l,n,{components:a,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"kerberos-storage---providers"},"Kerberos Storage - Providers"),Object(i.b)("p",null,"Kerberos Storage allows you to attach one or more (and different) storage providers. These providers could be in the cloud like S3, Google Cloud Storage or Azure blob storage, or providers on premise such as Minio."),Object(i.b)("p",null,"Depending on your use case: Kerberos Storage Cloud or Kerberos Storage Edge, you will opt for a specific storage provider. For example in the case Kerberos Storage Edge, it makes sense to store your recordings also at the edge. The accomplish this you could for example setup a Minio instance."),Object(i.b)("p",null,"Below you can find a detailed step-by-step guide to setup different storage providers."),Object(i.b)("h2",{id:"prerequisites"},"Prerequisites"),Object(i.b)("p",null,"This installation guide assumes you have setup Kerberos Storage properly."),Object(i.b)("h2",{id:"installation-minio"},"Installation Minio"),Object(i.b)("p",null,"Minio is the recommended solution if you want to persist your data at the edge. To setup minio you just have to install a few components. Let's start with getting the configuration files (if not already done) for setting up Minio."),Object(i.b)("pre",{className:"default-dark vscode-highlight","data-language":""},Object(i.b)("code",o({parentName:"pre"},{className:"vscode-highlight-code"}),Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"git clone https://github.com/kerberos-io/storage"))),Object(i.b)("p",null,"Now we have the configrations available, let's use start with creating a ",Object(i.b)("inlineCode",{parentName:"p"},"local-storage")," volume using ",Object(i.b)("inlineCode",{parentName:"p"},"./storage/yaml/minio/volume.yaml")," file. When opening the file we should focus on following attributes."),Object(i.b)("pre",{className:"default-dark vscode-highlight","data-language":""},Object(i.b)("code",o({parentName:"pre"},{className:"vscode-highlight-code"}),Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"  spec:"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"    capacity:"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"--\x3e   storage: 20Gi"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"    accessModes:"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"    - ReadWriteOnce"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"    persistentVolumeReclaimPolicy: Recycle"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"    storageClassName: hdd"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"    local:"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"--\x3e   path: /home/minio"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"    nodeAffinity:"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"      required:"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"        nodeSelectorTerms:"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"        - matchExpressions:"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"          - key: kubernetes.io/hostname"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"            operator: In"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"            values:"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"--\x3e         - hostname"))),Object(i.b)("p",null,"Adapt the storage capacity to the amount of storage you want to assign to Minio, change the local path to the directory where you want to persist your data, and to finish make sure the hostname is the hostname of your node (where the directory is located). Once ready we can create the ",Object(i.b)("inlineCode",{parentName:"p"},"local.path")," directory and create the volume."),Object(i.b)("pre",{className:"default-dark vscode-highlight","data-language":""},Object(i.b)("code",o({parentName:"pre"},{className:"vscode-highlight-code"}),Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"mkdir /home/minio"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"kubectl apply -f ./storage/yaml/minio/volume.yaml"))),Object(i.b)("p",null,"Next create Persistent Volume Claim (PVC), open the ",Object(i.b)("inlineCode",{parentName:"p"},"./storage/yaml/minio/volume.yaml")," file and make sure the storage is aligned with the configurations of you ",Object(i.b)("inlineCode",{parentName:"p"},"volume.yaml"),"."),Object(i.b)("pre",{className:"default-dark vscode-highlight","data-language":""},Object(i.b)("code",o({parentName:"pre"},{className:"vscode-highlight-code"}),Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"  resources:"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"    # This is the request for storage. Should be available in the cluster."),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"    requests:"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"--\x3e   storage: 20Gi    "))),Object(i.b)("p",null,"Once ready, create the PVC."),Object(i.b)("pre",{className:"default-dark vscode-highlight","data-language":""},Object(i.b)("code",o({parentName:"pre"},{className:"vscode-highlight-code"}),Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"kubectl apply -f ./storage/yaml/minio/pvc.yaml"))),Object(i.b)("p",null,"Ok, let us finish this and deploy the Kerberos Storage deployment. Before applying, we have to make sure the Ingress hostname is aligned. Open the ",Object(i.b)("inlineCode",{parentName:"p"},"./storage/yaml/minio/deployment.yaml")," file and scroll down until you see the Ingress."),Object(i.b)("pre",{className:"default-dark vscode-highlight","data-language":""},Object(i.b)("code",o({parentName:"pre"},{className:"vscode-highlight-code"}),Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"  spec:"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"    rules:"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"--\x3e - host: minio.domain.com"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"      http:"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"        paths:"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"        - path: /"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"          backend:"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"            serviceName: minio"),"\n",Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"            servicePort: 9000"))),Object(i.b)("p",null,"Adapt the hostname to your needs, and apply the ",Object(i.b)("inlineCode",{parentName:"p"},"deployment.yaml")," file when appropriate."),Object(i.b)("pre",{className:"default-dark vscode-highlight","data-language":""},Object(i.b)("code",o({parentName:"pre"},{className:"vscode-highlight-code"}),Object(i.b)("span",o({parentName:"code"},{className:"vscode-highlight-line"}),"kubectl apply -f ./storage/yaml/minio/deployment.yaml"))),Object(i.b)("p",null,"You should now see Minio being installed, and able to access it from your favourite web browser. You can use with the credentials you have defined in the ",Object(i.b)("inlineCode",{parentName:"p"},"deployment.yaml file.")),Object(i.b)("p",null,Object(i.b)("img",{alt:"minio kubernetes",src:t("jBle")})),Object(i.b)("style",{className:"vscode-highlight-styles"},"\n  :root {\n  --vscode-highlight-padding-v: 1rem;\n  --vscode-highlight-padding-h: 1.5rem;\n  --vscode-highlight-padding-top: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-right: var(--vscode-highlight-padding-h);\n  --vscode-highlight-padding-bottom: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-left: var(--vscode-highlight-padding-h);\n  --vscode-highlight-border-radius: 8px;\n\n  --vscode-highlight-line-highlighted-background-color: transparent;\n  --vscode-highlight-line-highlighted-border-width: 4px;\n  --vscode-highlight-line-highlighted-border-color: transparent;\n}\n\n.vscode-highlight {\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  padding-top: 1rem;\n  padding-top: var(--vscode-highlight-padding-top);\n  padding-bottom: 1rem;\n  padding-bottom: var(--vscode-highlight-padding-bottom);\n  border-radius: 8px;\n  border-radius: var(--vscode-highlight-border-radius);\n  font-feature-settings: normal;\n}\n\n.vscode-highlight-code {\n  display: inline-block;\n  min-width: 100%;\n}\n\n.vscode-highlight-line {\n  display: inline-block;\n  box-sizing: border-box;\n  width: 100%;\n  padding-left: 1.5rem;\n  padding-left: var(--vscode-highlight-padding-left);\n  padding-right: 1.5rem;\n  padding-right: var(--vscode-highlight-padding-right);\n}\n\n.vscode-highlight-line-highlighted {\n  background-color: var(--vscode-highlight-line-highlighted-background-color);\n  box-shadow: inset var(--vscode-highlight-line-highlighted-border-width) 0 0 0 var(--vscode-highlight-line-highlighted-border-color);\n}\n\n  .default-dark {\nbackground-color: #1E1E1E;\ncolor: #D4D4D4;\n}\n"))}void 0!==h&&h&&h===Object(h)&&Object.isExtensible(h)&&!h.hasOwnProperty("__filemeta")&&Object.defineProperty(h,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"src/storage/installation-providers.md"}}),h.isMDXComponent=!0},jBle:function(e,a,t){e.exports=t.p+"static/webapp-e9018c4186d6418783737a9b5188e38c.png"}}]);
//# sourceMappingURL=component---src-storage-installation-providers-md-30b5971a42ffa126b963.js.map