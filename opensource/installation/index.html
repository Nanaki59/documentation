<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet href=https://staging.doc.kerberos.live/main.3749708c37a2d1d9ca38ebc2f78d66b0aba34ab0ca08321290f222939630730576f2839b0c79aedc469d75b29ea86fa1adcbce71a1358bb3efdd868887f8f100.css integrity="sha512-N0lwjDei0dnKOOvC941msKujSrDKCDISkPIik5YwcwV28oObDHmu3EaddbKeqG+hrcvOcaE1i7Pv3YaIh/jxAA==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Installation - Kerberos.io Docs</title><meta name=description content="Open and extensible video surveillance and analytics solution for everyone at any location."><link rel=canonical href=https://staging.doc.kerberos.live/opensource/installation/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/doks.png"><meta name=twitter:title content="Installation"><meta name=twitter:description content="Kerberos Open Source comes with different installation flavours. So you might think, why? The reason is simple, depending on the use case one option is better than another. A short list of recommendations:
Plug and play  KiOS: You have a Raspberry Pi, and you only want to run a Kerberos agent on it. Docker: You have a lot of IP cameras, and/or don&rsquo;t want to mess with dependencies. Balena: Runnning the Kerberos Docker container on top of Balena."><meta name=twitter:site content="@kerberosio"><meta name=twitter:creator content="@kerberosio"><meta property="og:title" content="Installation"><meta property="og:description" content="Kerberos Open Source comes with different installation flavours. So you might think, why? The reason is simple, depending on the use case one option is better than another. A short list of recommendations:
Plug and play  KiOS: You have a Raspberry Pi, and you only want to run a Kerberos agent on it. Docker: You have a lot of IP cameras, and/or don&rsquo;t want to mess with dependencies. Balena: Runnning the Kerberos Docker container on top of Balena."><meta property="og:type" content="article"><meta property="og:url" content="/opensource/installation/"><meta property="og:image" content="/doks.png"><meta property="article:published_time" content="2020-10-06T08:49:31+00:00"><meta property="article:modified_time" content="2020-10-06T08:49:31+00:00"><meta property="og:site_name" content="Kerberos.io Docs"><meta property="article:publisher" content="https://www.facebook.com/"><meta property="article:author" content="https://www.facebook.com/"><meta property="og:locale" content="en_US"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/staging.doc.kerberos.live\/"},{"@type":"ListItem","position":3,"name":"Opensource","item":"https:\/\/staging.doc.kerberos.live\/\/opensource\/"},{"@type":"ListItem","position":4,"name":"Installation","item":"https:\/\/staging.doc.kerberos.live\/\/opensource\/installation\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://staging.doc.kerberos.live/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://staging.doc.kerberos.live/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://staging.doc.kerberos.live/favicons/favicon-16x16.png><link rel=manifest href=https://staging.doc.kerberos.live/site.webmanifest></head><body class="opensource single"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label><a class="navbar-brand order-1 order-md-0 me-auto" href=https://staging.doc.kerberos.live/>Kerberos.io Docs</a>
<button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav me-auto order-5 order-md-2"><li class=nav-item><a class=nav-link href=https://kerberos.io>Homepage</a></li></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input id=userinput class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded"></div></form></div></div></header><div class="wrap container" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>Prologue</h3><ul class=list-unstyled><li><a class=docs-link href=https://staging.doc.kerberos.live/>Introduction</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/prologue/how/>How it works</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/prologue/deployments/>Deployments</a></li></ul><h3>Opensource v2</h3><ul class=list-unstyled><li><a class=docs-link href=https://staging.doc.kerberos.live/opensource/first-things-first/>First things first</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/opensource/get-started/>Get started</a></li><li><a class="docs-link active" href=https://staging.doc.kerberos.live/opensource/installation/>Installation</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/opensource/installation-advanced/>Advanced Installation</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/opensource/releases/>Release notes</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/opensource/license/>License</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/opensource/upgrade/>Upgrade</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/opensource/contribute/>Contribute</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/opensource/machinery/>Machinery</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/opensource/web/>Web</a></li></ul><h3>Opensource v3</h3><ul class=list-unstyled><li><a class=docs-link href=https://staging.doc.kerberos.live/opensourcev3/announcement/>Announcement</a></li></ul><h3>Enterprise</h3><ul class=list-unstyled><li><a class=docs-link href=https://staging.doc.kerberos.live/enterprise/first-things-first/>First things first</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/enterprise/get-started/>Get Started</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/enterprise/installation/>Installation</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/enterprise/installation-cloud/>Cloud Installation</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/enterprise/installation-edge/>Edge Installation</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/enterprise/releases/>Releases</a></li></ul><h3>Vault</h3><ul class=list-unstyled><li><a class=docs-link href=https://staging.doc.kerberos.live/vault/first-things-first/>First things first</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/vault/get-started/>Get Started</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/vault/installation/>Installation</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/vault/installation-cloud/>Cloud Installation</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/vault/installation-edge/>Edge Installation</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/vault/providers/>Providers</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/vault/recycle/>Recycle</a></li><li><a class=docs-link href=https://staging.doc.kerberos.live/vault/releases/releases/>Releases</a></li></ul><h3>Hub</h3><ul class=list-unstyled><li><a class=docs-link href=https://staging.doc.kerberos.live/hub/first-things-first/>First things first</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-4" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><ul><li><a href=#plug-and-play>Plug and play</a></li><li><a href=#advanced>Advanced</a></li></ul></li></ul><ul><li><a href=#kios>KiOS</a><ul><li><a href=#github>Github</a></li><li><a href=#kerberos-open-source-installer>Kerberos Open Source installer</a></li><li><a href=#etcher>Etcher</a></li><li><a href=#power-on-the-raspberry-pi>Power on the Raspberry Pi</a></li><li><a href=#access-the-raspberry-pi>Access the Raspberry Pi</a></li></ul></li><li><a href=#docker>Docker</a><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#github-1>Github</a></li><li><a href=#download-docker-image>Download docker image</a></li><li><a href=#volumes>Volumes</a></li></ul></li><li><a href=#balena>Balena</a><ul><li><a href=#1-create-a-balena-account>1. Create a Balena account</a></li><li><a href=#2-create-a-device-and-flash>2. Create a device and flash</a></li><li><a href=#3-connect>3. Connect</a></li><li><a href=#4-write>4. Write</a></li><li><a href=#5-push>5. Push</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-8"><h1>Installation</h1><p class=lead></p><p>Kerberos Open Source comes with different installation flavours. So you might think, why? The reason is simple, depending on the use case one option is better than another. A short list of recommendations:</p><h3 id=plug-and-play>Plug and play<a href=#plug-and-play class=anchor aria-hidden=true>#</a></h3><ol><li><a href=https://staging.doc.kerberos.live/opensource/installation#kios>KiOS</a>: You have a Raspberry Pi, and you only want to run a Kerberos agent on it.</li><li><a href=https://staging.doc.kerberos.live/opensource/installation#docker>Docker</a>: You have a lot of IP cameras, and/or don&rsquo;t want to mess with dependencies.</li><li><a href=https://staging.doc.kerberos.live/opensource/installation#balena>Balena</a>: Runnning the Kerberos Docker container on top of Balena.</li></ol><h3 id=advanced>Advanced<a href=#advanced class=anchor aria-hidden=true>#</a></h3><ol start=4><li><a href=https://staging.doc.kerberos.live/opensource/installation-advanced#raspbian>Raspbian</a>: You have a Raspberry Pi, but you want other services running next to the Kerberos agent.</li><li><a href=https://staging.doc.kerberos.live/opensource/installation-advanced#generic>Generic</a>: You want to develop/extend Kerberos with your own features, or you want to run a Kerberos agent on a not supported OS/architecure.</li></ol><hr><h1 id=plug-and-play-1>Plug and play</h1><p>Following installation methods aim for the simplicity of installing Kerberos Open Source. With almost no efforts you can have Kerberos Open Source running.</p><h2 id=kios>KiOS<a href=#kios class=anchor aria-hidden=true>#</a></h2><p>KiOS (Kerberos Operating System) is our custom linux OS, which runs the Kerberos agent out-of-the-box (read plug-and-play). It&rsquo;s an OS designed for the Raspberry Pi (all version are supported), which you can flash to an SD card.</p><p>It can be installed using our own installer, which comes with a nice interface that handles the flashing and network configuration for you, or you can handle the flashing yourself by using Etcher.</p><h3 id=github>Github<a href=#github class=anchor aria-hidden=true>#</a></h3><p>KiOS is compiled using Buildroot, the project can be found on <a href=https://github.com/kerberos-io/kios>following Github repo</a>.</p><h3 id=kerberos-open-source-installer>Kerberos Open Source installer<a href=#kerberos-open-source-installer class=anchor aria-hidden=true>#</a></h3><p>Installing the Kerberos agent to your Raspberry Pi, has never been so easy. By using our cross-platform installer, you can run a fully configured video surveillance system within 3 minutes. Indeed, we also think that&rsquo;s awesome!</p><figure class=stretch><img src=kios-install.gif alt="Using the KiOS installer, you can easily deploy the Kerberos Opensource agent to your Raspberry Pi."><figcaption><p>Using the KiOS installer, you can easily deploy the Kerberos Opensource agent to your Raspberry Pi.</p></figcaption></figure><p>Download the correct installer for your OS below:</p><blockquote><p>https://github.com/kerberos-io/etcher/releases</p></blockquote><h3 id=etcher>Etcher<a href=#etcher class=anchor aria-hidden=true>#</a></h3><p>If you love Etcher, or the Kerberos installer is not working as expected, you can also flash the Kerberos agent to your SD card manually. It goes as following:</p><ol><li>Download <a href=https://github.com/kerberos-io/kios/releases>the KiOS image</a>,</li><li>flash it to your SD card with Etcher,</li><li>and edit some configuration files at the boot directory.</li></ol><figure class=stretch><img src=etcher-install.png alt="You could also install using the Etcher installer."><figcaption><p>You could also install using the Etcher installer.</p></figcaption></figure><p>Once you have download the KiOS image (make sure you downloaded the right image) and flashed it to an SD card, put it back into your working station. Navigate to the SD card and creating following files.</p><h4 id=connecting-to-wifi>Connecting to WiFi<a href=#connecting-to-wifi class=anchor aria-hidden=true>#</a></h4><p>If you want to connect your Raspberry Pi to a WiFi connection, you will need to create a file <code>wireless.conf</code> on your SD card, with following contents. Change the SSID and password properties to your own WiFi credentials.</p><pre><code class=language-ts>update_config=1
ctrl_interface=/var/run/wpa_supplicant
network={
  scan_ssid=1
  ssid=&quot;&quot;
  psk=&quot;&quot;
}
</code></pre><h4 id=setup-a-static-ip-address>Setup a static IP-address<a href=#setup-a-static-ip-address class=anchor aria-hidden=true>#</a></h4><p>If you want to assign a static ip-address to your Raspberry Pi, create a file <code>static_ip.conf</code> on your SD card, with following contents:</p><pre><code class=language-ts>#####################################################################
# Enter the IP-address you want to have, followed by the subnet mask
# e.g. 192.168.0.10/24
static_ip=&quot;&quot;
#####################################################################
# Enter the Gateway and DNS, this will be your router in most cases
# e.g. 192.168.0.1
static_gw=&quot;&quot;
static_dns=&quot;&quot;
</code></pre><h3 id=power-on-the-raspberry-pi>Power on the Raspberry Pi<a href=#power-on-the-raspberry-pi class=anchor aria-hidden=true>#</a></h3><p>Once you&rsquo;ve finished the installation using either the KiOS installer or Etcher, you can put the SD card into your Raspberry Pi and turn it on. Please note that the first time you boot KiOS it can take about 2 mins before the system is operational. When KiOS is ready you can open your favorite browser and type in the IP address of your Raspberry Pi. This will open the Kerberos agent&rsquo;s front-end, which you can access with the username: root and password: root.</p><figure class=stretch><img src=dashboard.png alt="After successful installation you should land on the starting page."><figcaption><p>After successful installation you should land on the starting page.</p></figcaption></figure><h3 id=access-the-raspberry-pi>Access the Raspberry Pi<a href=#access-the-raspberry-pi class=anchor aria-hidden=true>#</a></h3><p>You can access the KiOS system with attaching your Raspberry Pi to a HDMI monitor or by using <code>ssh</code>.</p><pre><code class=language-ts>$ ssh root@192.168.0.12
Welcome to kios-79e30bbb!
[root@kios-79e30bbb ~]#
</code></pre><p>Note that by default no root password is set, you can define a password in the <code>/data/etc/kios.conf</code> file. Once you added a password, make sure to reboot the OS.</p><pre><code class=language-ts>[root@kios-79e30bbb ~]# nano /data/etc/kios.conf
[root@kios-79e30bbb ~]# reboot
</code></pre><h2 id=docker>Docker<a href=#docker class=anchor aria-hidden=true>#</a></h2><p>A Docker image (amd64, armv7, arm64) is available on <a href=https://hub.docker.com/u/kerberos>the Docker hub</a>, which contains all the necessary software to setup the Kerberos agent in a matter of seconds. Before you can run this image, make sure you have Docker installed. Afterwards you can use Docker, to get the Kerberos agent up and running. All Docker images can be found on <a href=https://hub.docker.com/u/kerberos>the Docker hub</a>.</p><p>This installation guide assumes you already have a good understanding of Docker. If you want to learn more about Kerberos.io on Docker, have a look at these tutorials.</p><ul><li><a href=https://medium.com/@cedricverst/kerberos-io-the-road-to-docker-8e048a480241>Kerberos.io — the road to Docker</a></li><li><a href=https://medium.com/@cedricverst/kerberos-io-on-docker-19b25fa7efd1>Kerberos.io on Docker</a></li></ul><h3 id=prerequisites>Prerequisites<a href=#prerequisites class=anchor aria-hidden=true>#</a></h3><blockquote><p>Docker or Docker Desktop (Linux, OS or Windows)</p></blockquote><h3 id=github-1>Github<a href=#github-1 class=anchor aria-hidden=true>#</a></h3><p>All technical information, such as Dockerfile, can be found on <a href=https://github.com/kerberos-io/docker>following Github repo</a>.</p><h3 id=download-docker-image>Download docker image<a href=#download-docker-image class=anchor aria-hidden=true>#</a></h3><p>Before you are able to run the Kerberos agent inside a container, you will need to pull the docker image from the Docker hub.</p><pre><code class=language-ts>docker pull kerberos/kerberos
</code></pre><p>When you pulled succesfully you can run your first Kerberos container as following. This will run Kerberos agent and expose the web interface on port 80, and the livestream on port 8889.</p><pre><code class=language-ts>docker run --name camera1 -p 80:80 -p 8889:8889 -d kerberos/kerberos
</code></pre><p>To add more containers, you can change the name parameter and assign another port to expose the web interface and livestream (ports are unique on a OS).</p><pre><code class=language-ts>docker run --name camera2 -p 81:80 -p 8890:8889 -d kerberos/kerberos
docker run --name camera3 -p 82:80 -p 8891:8889 -d kerberos/kerberos
</code></pre><p>When the containers are created, you can open your browser and browse to your different containers.</p><pre><code class=language-ts>http://localhost:80
http://localhost:81
http://localhost:82
</code></pre><h3 id=volumes>Volumes<a href=#volumes class=anchor aria-hidden=true>#</a></h3><p>Instead of just running the Kerberos container, you can also persist your configuration by assigning volumes. An example of mounting volumes looks like this; an overview of <a href=https://github.com/kerberos-io/docker/blob/master/Dockerfile#L171-L177>the different volumes can be found here</a>.</p><ul><li>preload configuration,</li><li>or centralise the images/videos on your working station.</li></ul><pre><code class=language-ts>docker run --name kerberos-camera1 \
-p 80:80 -p 8889:8889 \
-v ~/config:/etc/opt/kerberosio/config \
-v ~/capture:/etc/opt/kerberosio/capture \
-v ~/logs:/etc/opt/kerberosio/logs \
-v ~/webconfig:/var/www/web/config \
-d kerberos/kerberos
</code></pre><h2 id=balena>Balena<a href=#balena class=anchor aria-hidden=true>#</a></h2><p>Running Kerberos inside a Docker container is great, it makes it possible to run Kerberos everywhere; basically on any OS. You can deploy Kerberos easily to the many different IoT boards we nowadays have available. The challenge with all these IoT boards is that they have different system architecures, however thanks to Docker (and its multi architecture builds), we can ship Kerberos to any of them. If you have a Raspberry Pi, you have two options: <a href=https://staging.doc.kerberos.live/opensource/installation#docker>Docker</a> and <a href=https://staging.doc.kerberos.live/opensource/installation#kios>KiOS</a>. If you have any other board, then <a href=https://staging.doc.kerberos.live/opensource/installation#docker>Docker</a> is the way to go.</p><p>Once you&rsquo;ve deployed the Kerberos Docker container, you can start monitoring your video surveillances cameras, however it doesn&rsquo;t have to stop here. Probably you also want remote access to your IoT board, and maybe some other cool stuff like system control, a VPN, a public url? This is where <a href=https://balena.io>Balena.io</a> comes in.</p><p>Before getting into the details, you can <a href=https://medium.com/@cedricverst/kerberos-io-on-balenacloud-7d5a5dd68992>find a more detailed tutorial at this blog</a>.</p><h3 id=1-create-a-balena-account>1. Create a Balena account<a href=#1-create-a-balena-account class=anchor aria-hidden=true>#</a></h3><p>Before moving on, make sure you have registered on <a href=https://www.balena.io>Balena</a>.</p><figure class=stretch><img src=balena-signup.png alt="Creating a Balena Cloud account to onboard your Kerberos Opensource agent."><figcaption><p>Creating a Balena Cloud account to onboard your Kerberos Opensource agent.</p></figcaption></figure><h3 id=2-create-a-device-and-flash>2. Create a device and flash<a href=#2-create-a-device-and-flash class=anchor aria-hidden=true>#</a></h3><p>After you signed up, you can create an application for a specific IoT board (e.g. Raspberry Pi 3). Once created you will be able to download the balena OS image, which you can flash to your SD card using <a href=https://www.balena.io/etcher/>Etcher</a>.</p><figure class=stretch><img src=balena-create.png alt="After signed up, create an application for your Kerberos Opensource agent."><figcaption><p>After signed up, create an application for your Kerberos Opensource agent.</p></figcaption></figure><h3 id=3-connect>3. Connect<a href=#3-connect class=anchor aria-hidden=true>#</a></h3><p>Once you&rsquo;ve flashed the balena OS, turned on your IoT board, a new device should come up on the Balena dashboard (below the application you&rsquo;ve created). At this point you will be able to connect to your device using the <strong>balena-cli</strong> <a href=https://github.com/balena-io/balena-cli/blob/master/INSTALL.md#executable-installer>read more about the installation here</a>.</p><p>First connect the <strong>balena-cli</strong> to your account by executing following command. Choose the recommended option.</p><pre><code>balena login
</code></pre><p>After succesfully logged in you should be able to list your devices.</p><pre><code>balena devices
</code></pre><h3 id=4-write>4. Write<a href=#4-write class=anchor aria-hidden=true>#</a></h3><p>Finally, we can push our Kerberos Docker container to our application (and devices). To do this we need to create two files.</p><ol><li>Create a new directory and the Dockerfile.</li></ol><p>The first file is named <code>Dockerfile</code> this file will contain a base image which references to our Kerberos image, which <a href="https://hub.docker.com/repository/docker/kerberos/kerberos/tags?page=1">you can find here</a>.</p><pre><code>mkdir kerberosbalena
cd kerberosbalena
echo 'FROM kerberos/kerberos@sha256:70a8b2791c8605ca6f8442b3d7892bb9bfc0789ab2f9f68911e247f7af50caed
CMD [&quot;bash&quot;, &quot;/run.sh&quot;]' &gt; Dockerfile
</code></pre><p>Please note that we specified a sha256 tag, you have to make sure you use the right sha256 tag for your architecure. In the example above we use the sha256 tag for a armv7 architecture (Raspberry Pi3).</p><ol start=2><li>Create a Docker compose file.</li></ol><p>The Docker compose file is optional, but can be very useful. It can be used to deploy multi container application (e.g. a webserver + database). As Kerberos has everything in one single container, this is not needed.</p><p>We will use the `docker-compose.yml to mount volumes, so that when we restart our container all our configurations and recordings stay persisted.</p><p>Create a new file named <code>docker-compose.yml</code>, and copy-paste following content.</p><pre><code>version: '2.1'
networks: {}
volumes:
  config: {}
  capture: {}
  logs: {}
  web: {}
services:
  main:
    build:
      context: .
    privileged: true
    tty: true
    restart: always
    network_mode: host
    volumes:
      - 'config:/etc/opt/kerberosio/config'
      - 'capture:/etc/opt/kerberosio/capture'
      - 'logs:/etc/opt/kerberosio/logs'
      - 'web:/var/www/web/config'
    labels:
      io.balena.features.kernel-modules: '1'
      io.balena.features.firmware: '1'
      io.balena.features.dbus: '1'
      io.balena.features.supervisor-api: '1'
      io.balena.features.resin-api: '1'
      io.balena.features.balena-socket: '1'
</code></pre><h3 id=5-push>5. Push<a href=#5-push class=anchor aria-hidden=true>#</a></h3><p>Now we created our two files, we can publish the Kerberos container to balena (our application), by executing the push command (replace &lt;application_name> by the name of your application).</p><pre><code>balena push &lt;application_name&gt;
</code></pre><p>Once finished you should see following message, and on the dashboard you should see your devices updating (Yes you can add multiple devices to an application). You&rsquo;re ready ;)</p><figure class=stretch><img src=balena-push.png alt="Once created you can push the Kerberos Opensource agent to your Balenca Cloud app."><figcaption><p>Once created you can push the Kerberos Opensource agent to your Balenca Cloud app.</p></figcaption></figure><p class=edit-page><a href=https://github.com/kerberos-io/documentation/blob/master/content/opensource/installation/index.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></p><div class="docs-navigation d-flex justify-content-between"><a href=https://staging.doc.kerberos.live/opensource/get-started/><div class="card my-1"><div class="card-body py-2">&larr; Get started</div></div></a><a class=ms-auto href=https://staging.doc.kerberos.live/opensource/installation-advanced/><div class="card my-1"><div class="card-body py-2">Advanced Installation &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container><div class=row><div class="col-lg-6 order-last order-lg-first"><ul class="navbar-nav social-nav"><li class=copyright>&copy;&nbsp;2014&ndash;2021
<a href=https://kerberos.io>Kerberos.io</a></li><li class=nav-item><a class=link href=https://twitter.com/kerberosio title=Twitter><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg><span class="ms-2 visually-hidden">Twitter</span></a></li><li class=nav-item><a class=link href=https://github.com/kerberos-io title=GitHub><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ms-2 visually-hidden">GitHub</span></a></li><li class=nav-item><a class=link href=https://www.reddit.com/r/kerberos_io/ title=Reddit><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-message-circle"><path d="M21 11.5a8.38 8.38.0 01-.9 3.8A8.5 8.5.0 0112.5 20a8.38 8.38.0 01-3.8-.9L3 21l1.9-5.7A8.38 8.38.0 014 11.5a8.5 8.5.0 014.7-7.6 8.38 8.38.0 013.8-.9h.5a8.48 8.48.0 018 8v.5z"/></svg><span class="ms-2 visually-hidden">Reddit</span></a></li></ul></div><div class="col-lg-10 order-first order-lg-last text-lg-end"><ul class=list-inline><li class=list-inline-item>Learn more about</li><li class=list-inline-item><a href=https://kerberos.io/product/enterprise-agent/>Enterprise Agent</a></li><li class=list-inline-item><a href=https://kerberos.io/product/hub/>Hub</a></li><li class=list-inline-item><a href=https://kerberos.io/product/open-source/>Kerberos Opensource</a></li><li class=list-inline-item><a href=https://kerberos.io/product/vault/>Vault</a></li></ul></div></div></div></footer><script src=https://staging.doc.kerberos.live/js/highlight.min.8cdbefd08ec63ef25f4b2510ae50c13b3d9ed43e25a15ddb55f14c33130e68cf8be3131ccf2d087c49f5f21fe88c2f0e2715a21f936047d0d0b85dc48cb864b9.js integrity="sha512-jNvv0I7GPvJfSyUQrlDBOz2e1D4loV3bVfFMMxMOaM+L4xMczy0IfEn18h/ojC8OJxWiH5NgR9DQuF3EjLhkuQ==" crossorigin=anonymous defer></script><script src=https://staging.doc.kerberos.live/main.min.89223fc6eee34e2dc10266cff3c7fc87949c595388f775ec6e93132410cef77e5ff7f24a81db03c9b9eb6d2e6d75ea5a7d22945c574b65dfeb426f65af771230.js integrity="sha512-iSI/xu7jTi3BAmbP88f8h5ScWVOI93XsbpMTJBDO935f9/JKgdsDybnrbS5tdepafSKUXFdLZd/rQm9lr3cSMA==" crossorigin=anonymous defer></script><script src=https://staging.doc.kerberos.live/index.min.77bb7a71cbf5a1d289dbbc15411ae6b3759e188b5ba483d82afe80fe2dbe64fa2b88cc5cfacd0e5626a59d6f61fb2087517db485efcd9adf83cf57790f73a3c9.js integrity="sha512-d7t6ccv1odKJ27wVQRrms3WeGItbpIPYKv6A/i2+ZPoriMxc+s0OVialnW9h+yCHUX20he/Nmt+Dz1d5D3OjyQ==" crossorigin=anonymous defer></script></body></html>